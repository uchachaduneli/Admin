<div fxLayout="row wrap">
  <div fxFlex="100" fxFlex.gt-sm="100" fxFlex.gt-xs="100">
    <mat-tab-group (selectedTabChange)="handleTabChanges($event)">
      <mat-tab label="მთავარი #{{selectedObject.id}}">
        <table style="width: 100%">
          <tr>
            <td style="width: 35%">
              <mat-card>
                <mat-card-content>
                  <mat-card-title>ზოგადი</mat-card-title>
                  <br>
                  <mat-form-field>
                    <input [(ngModel)]="selectedObject.barCode" matInput name="id" placeholder="თრექინგის #"
                           readonly
                           type="text">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="createdTime" placeholder="თარიღი" readonly
                           type="text"
                           value="{{selectedObject.createdTime | date :'dd/MM/yyyy HH:mm'}} ">

                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </td>
            <td style="width: 35%">
              <mat-card>
                <mat-card-content>
                  <mat-card-title>გადამხდელი</mat-card-title>
                  <br>
                  <mat-form-field>
                    <input [ngModel]="selectedObject.payerName" matInput name="payerName" placeholder="გადამხდელი"
                           readonly
                           type="text">
                  </mat-form-field>
                  <mat-form-field>
                    <input [(ngModel)]="selectedObject.payerIdentNumber" matInput name="payerIdentNumber"
                           placeholder="საიდენტიფიკაციო #"
                           readonly
                           type="text">
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </td>
            <td>
              <mat-card>
                <mat-card-content>
                  <mat-card-title>მიმდინარე სტატუსი</mat-card-title>
                  <br>
                  <mat-form-field>
                    <input [(ngModel)]="selectedObject.status?.status.name" matInput name="statusName"
                           placeholder="სტატუსი "
                           readonly
                           type="text">
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </td>
          </tr>

          <tr>
            <td>
              <mat-card>
                <mat-card-content>
                  <mat-card-title>გამგზავნი</mat-card-title>
                  <br>
                  <mat-form-field>
                    <input matInput name="senderName" placeholder="გამგზავნი " readonly
                           type="text"
                           value="{{selectedObject.senderName}} - {{selectedObject.senderIdentNumber}}">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="senderCity" placeholder="ქალაქი" readonly
                           type="text"
                           value="{{selectedObject.senderCity?.name}}">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="senderAddress" placeholder="მისამართი" readonly
                           type="text"
                           value="{{selectedObject.senderAddress}}">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="senderAddress" placeholder="საკ. პირი" readonly
                           type="text"
                           value="{{selectedObject.senderContactPerson}} - {{selectedObject.senderPhone}}">
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </td>
            <td>
              <mat-card>
                <mat-card-content>
                  <mat-card-title>მიმღები</mat-card-title>
                  <br>
                  <mat-form-field>
                    <input matInput name="receiverName" placeholder="მიმღები" readonly
                           type="text"
                           value="{{selectedObject.receiverName}} - {{selectedObject.receiverIdentNumber}}">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="receiverCity" placeholder="ქალაქი" readonly
                           type="text"
                           value="{{selectedObject.receiverCity?.name}}">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="receiverAddress" placeholder="მისამართი" readonly
                           type="text"
                           value="{{selectedObject.receiverAddress}}">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="receiverAddress" placeholder="საკ. პირი" readonly
                           type="text"
                           value="{{selectedObject.receiverContactPerson}} - {{selectedObject.receiverPhone}}">
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </td>
            <td>
              <mat-card>
                <mat-card-content>
                  <mat-card-title>გადახდის ადგილი</mat-card-title>
                  <br>
                  <mat-form-field>
                    <input matInput name="paymentPlace" placeholder="საწყობი" readonly
                           type="text"
                           value="_">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput name="paymentAddress" placeholder="მისამართი" readonly
                           type="text"
                           value="_">
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </td>
          </tr>
        </table>
        <table style="width: 100%">
          <tr>
            <td style="width: 50%">
              <mat-card>
                <mat-card-content>
                  <table class="table table-striped table-bordered">
                    <thead>
                    <tr>
                      <th>სიგრძე</th>
                      <th>სიგანე</th>
                      <th>სიმაღლე</th>
                      <th>მოც. წონა</th>
                      <!--                      <th>პლომბის #</th>-->
                      <!--                      <th>ყუთის #</th>-->
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let dynamic of packages; let i = index;">
                      <td>
                        <input [(ngModel)]="dynamic.length" matInput name="length{{i}}"
                               placeholder="სიგრძე" readonly
                               type="number"/>
                      </td>
                      <td>
                        <input [(ngModel)]="dynamic.width" matInput name="width{{i}}"
                               placeholder="სიგანე" readonly
                               type="number"/>
                      </td>
                      <td>
                        <input [(ngModel)]="dynamic.height" matInput name="height{{i}}"
                               placeholder="სიმაღლე" readonly
                               type="number"/>
                      </td>
                      <td>
                        <input [(ngModel)]="dynamic.volumeWeight" matInput name="volumeWeight{{i}}"
                               placeholder="მოც.წონა"
                               readonly type="number"/>
                      </td>
                      <!--                      <td>-->
                      <!--                        <input [(ngModel)]="dynamic.plombNumber" readonly matInput placeholder="პლომბის #" type="text"-->
                      <!--                               name="plombNumber{{i}}"/>-->
                      <!--                      </td>-->
                      <!--                      <td>-->
                      <!--                        <input [(ngModel)]="dynamic.boxNumber" readonly matInput placeholder="ყუთის #" type="text"-->
                      <!--                               name="boxNumber{{i}}"/>-->
                      <!--                      </td>-->
                    </tr>
                    </tbody>
                  </table>
                </mat-card-content>
              </mat-card>
              <br>
              <mat-card>
                <mat-card-content>
                  <mat-card-title>გზავნილი</mat-card-title>
                  <br>
                  <div fxLayout="row">
                    <mat-form-field>
                      <input [ngModel]="packages?.length" matInput name="packagesLength" placeholder="რაოდენობა">
                    </mat-form-field> &nbsp; &nbsp;
                    <mat-form-field>
                      <input *ngIf="selectedObject.paymentType === 1" matInput name="paymentType"
                             placeholder="გადახდ. ტიპი"
                             value="ინვოისი">
                      <input *ngIf="selectedObject.paymentType === 2" matInput name="paymentType"
                             placeholder="გადახდ. ტიპი"
                             value="ნაღდი">
                      <input *ngIf="selectedObject.paymentType === 3" matInput name="paymentType"
                             placeholder="გადახდ. ტიპი"
                             value="ბარათი">
                      <input *ngIf="!selectedObject.paymentType" matInput name="paymentType"
                             placeholder="გადახდ. ტიპი"
                             value="განსაზღვრული არაა">
                    </mat-form-field>
                  </div>
                  <div fxLayout="row">
                    <mat-form-field>
                      <input [ngModel]="selectedObject.weight" matInput placeholder="წონა">
                    </mat-form-field> &nbsp; &nbsp;
                    <mat-form-field>
                      <input matInput placeholder="გზავ. ტიპი" value="{{selectedObject.service?.name}}">
                    </mat-form-field>
                  </div>
                  <div fxLayout="row">
                    <mat-form-field>
                      <input [ngModel]="selectedObject.gadafutvisPrice" matInput placeholder="გადაფუთვის ფასი">
                    </mat-form-field>
                    <mat-form-field>
                      <input [ngModel]="selectedObject.totalPrice" matInput placeholder="ფასი">
                    </mat-form-field>&nbsp; &nbsp;
                    <mat-form-field>
                      <input value="{{selectedObject.gadafutvisPrice + selectedObject.totalPrice}}" matInput
                             placeholder="ჯამი">
                    </mat-form-field>
                    <!--                    <mat-form-field>-->
                    <!--                      <input matInput placeholder="ტრანსპ. სახე" value="_">-->
                    <!--                    </mat-form-field>-->
                  </div>
                  <div fxLayout="row">
                    <!--                    <mat-form-field>-->
                    <!--                      <input matInput placeholder="ტრანსპორტირების ფასი" value="_">-->
                    <!--                    </mat-form-field>&nbsp; &nbsp;-->
                    <mat-form-field>
                      <input matInput placeholder="მომხმარებელი"
                             value="{{selectedObject.author?.name}} {{selectedObject.author?.lastName}}">
                    </mat-form-field>
                  </div>
                  <div fxLayout="row">
                    <mat-form-field>
                      <input *ngIf="selectedObject.deliveryType === 1" matInput placeholder="ჩაბარების ტიპი"
                             value="მიტანა მისამართზე">
                      <input *ngIf="selectedObject.deliveryType === 2" matInput placeholder="ჩაბარების ტიპი"
                             value="მიკითხვა">
                      <input *ngIf="!selectedObject.deliveryType" matInput placeholder="ჩაბარების ტიპი"
                             value="განსაზღვრული არაა">
                    </mat-form-field>&nbsp; &nbsp;

                  </div>
                  <div fxLayout="row">
                    <mat-form-field>
                      <input matInput placeholder="ჩაბარების ტიპი" value="{{selectedObject.route?.name}}">
                    </mat-form-field>&nbsp; &nbsp;
                    <mat-form-field>
                      <input *ngIf="selectedObject.packageType === 1" matInput placeholder="პაკეტის ტიპი"
                             value="ამანათი">
                      <input *ngIf="selectedObject.packageType === 2" matInput placeholder="პაკეტის ტიპი"
                             value="პაკეტი">
                      <input *ngIf="!selectedObject.packageType" matInput placeholder="პაკეტის ტიპი"
                             value="განსაზღვრული არაა">
                    </mat-form-field>
                  </div>

                </mat-card-content>
              </mat-card>
            </td>
            <td style="width: 35%">
              <mat-card>
                <mat-card-content>
                  <table style="width: 100%">
                    <tr>
                      <th>#</th>
                      <th>სერვისი</th>
                      <th>ფასი</th>
                      <th>ტიპი</th>
                    </tr>
                  </table>
                </mat-card-content>
              </mat-card>
              <br>
              <mat-card>
                <mat-card-content>
                  <mat-card-title>სხვა</mat-card-title>
                  <br>
                  <textarea matInput placeholder="კომენტარი" rows="3" style="border-bottom: 1px solid"
                            value="{{selectedObject.comment}}"></textarea><br><br><br>
                  <textarea matInput placeholder="შიგთავსი" rows="3" style="border-bottom: 1px solid"
                            value="{{selectedObject.content}}"></textarea>
                </mat-card-content>
              </mat-card>
            </td>
          </tr>
        </table>
      </mat-tab>
      <mat-tab label="ჩექპოინტები">
        <mat-card>
          <mat-card-content>
            <table class="table table-striped table-bordered">
              <thead>
              <tr>
                <th>#</th>
                <th>კოდი</th>
                <th>კოდის განმარტება</th>
                <th>ქვეკოდი</th>
                <th>ქვეკოდის განმარტება</th>
                <th>ავტორი</th>
                <th>კომენტარი</th>
                <th>კურიერი/მომხმარ.</th>
                <th>საწყობი</th>
                <th>თარიღი</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let v of statusHistoryList; let i = index;" class="topBottomBorder">
                <td> {{v.id}}</td>
                <td> {{v.code}}</td>
                <td> {{v.name}}</td>
                <td> {{v.reasonCode}}</td>
                <td> {{v.reason}}</td>
                <td> {{v.author?.name}}&nbsp;{{v.author?.lastName}}</td>
                <td> {{v.comment}}</td>
                <td> {{v.courierUser?.name}}&nbsp;{{v.courierUser?.lastName}}</td>
                <td>{{v.warehouse?.name}}</td>
                <td>{{v.createdTime | date :'dd/MM/yyyy HH:mm'}}</td>
              </tr>
              </tbody>
            </table>
          </mat-card-content>
        </mat-card>
      </mat-tab>
      <mat-tab label="დოკუმენტები">
        <mat-card>
          <mat-card-content>
            <table class="table table-striped table-bordered">
              <thead>
              <tr>
                <th>#</th>
                <th>დასახელება</th>
                <th>ავტორი</th>
                <th>სკანირების საწყობი</th>
                <th>თარიღი</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let v of fileList;" class="topBottomBorder">
                <td> {{v.id}}</td>
                <td><a href="{{v.url}}" target="_blank">{{v.name}}</a></td>
                <td>{{v.author?.name}}&nbsp;{{v.author?.lastName}}</td>
                <td>{{v.author?.warehouse?.abbreviature}}</td>
                <td>{{v.createdTime | date :'dd/MM/yyyy HH:mm'}}</td>
              </tr>
              </tbody>
            </table>
          </mat-card-content>
        </mat-card>
      </mat-tab>
      <mat-tab label="ტრეისინგი">
        <form #tracingForm="ngForm">
          <mat-card>
            <mat-card-content>
              <mat-form-field>
                <input [(ngModel)]="selectedMessage.subject" id="subject" matInput name="subject" placeholder="თემა"
                       required
                       type="text">
              </mat-form-field>
              <mat-form-field *ngIf="selectedMessage.to">
                <mat-select [(ngModel)]="selectedMessage.to" name="to" placeholder="ადრესატი" required>
                  <mat-option *ngFor="let z of warehouseList" [value]="z">{{z.name}} ({{z.city.name}})</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field *ngIf="selectedCCList">
                <mat-select [(ngModel)]="selectedCCList" multiple name="cc" placeholder="CC">
                  <mat-option *ngFor="let z of warehouseList" [value]="z">{{z.name}} ({{z.city.name}})</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field>
              <textarea [(ngModel)]="selectedMessage.msg" cols="5" matInput name="msg" placeholder="მესიჯი" required
                        rows="5"></textarea>
              </mat-form-field>
              <div align="end">
                <button (click)="sendMsg()" [disabled]="!tracingForm.valid" bg-success color="warn" mat-button
                        mat-flat-button> გაგზავნა
                  <mat-icon>send</mat-icon>
                </button>
                <button (click)="clearMsg()" mat-button>გასუფთავება
                  <mat-icon>close</mat-icon>
                </button>
              </div>

              <br><br><br>
              <table class="table table-striped table-bordered">
                <thead>
                <tr>
                  <th>#</th>
                  <th>საგანი</th>
                  <th>ადრესატი</th>
                  <th>ავტორი</th>
                  <th>მესიჯი</th>
                  <th>თარიღი</th>
                </tr>
                <tr>
                  <td colspan="6"></td>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let v of messageList;" class="topBottomBorder">
                  <td> {{v.id}}</td>
                  <td>{{v.subject}}</td>
                  <td>{{v.to?.abbreviature}}</td>
                  <td>{{v.author?.warehouse.abbreviature}}({{v.author?.name}} {{v.author?.lastName}})</td>
                  <td>{{v.msg}}</td>
                  <td>{{v.createdTime | date :'dd/MM/yyyy HH:mm'}}</td>
                </tr>
                </tbody>
              </table>
            </mat-card-content>
          </mat-card>
        </form>
      </mat-tab>
      <mat-tab label="ტომარა/ჩაბ. დეტალი"></mat-tab>
      <mat-tab label="SMS შეტყობინებები"></mat-tab>
    </mat-tab-group>
  </div>
</div>
